{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\munee\\\\Desktop\\\\project-stact\\\\Fanlinc\\\\Front-end\\\\src\\\\Components\\\\CreatePost.js\";\nimport React, { Component } from 'react';\nimport NavigationBar from './NavigationBar';\nimport { Button, Form } from 'reactstrap';\nimport axios from 'axios';\nimport '../CSS-FOLDER/post.css';\nimport dotenv from 'dotenv';\nimport FandomPageBar from './FandomPageBar';\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\ndotenv.config();\nconst errorStyle = {\n  color: \"red\"\n};\n\nclass CreatePost extends Component {\n  constructor(props) {\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n    super(props);\n    this.state = {\n      myFandoms: [],\n      title: '',\n      post: '',\n      fandomId: myParam,\n      fandomName: '',\n      error: \"\"\n    };\n\n    if (localStorage.getItem('loggedin') !== 'true') {\n      this.props.history.push(\"/\");\n    }\n\n    if (myParam === null) {\n      this.props.history.push(\"/Home\");\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    console.log(this.state.title);\n    console.log(this.state.post);\n    axios.put(\"\".concat(API_HOST_URL, \"/MakePost\"), {\n      \"userId\": localStorage.getItem('id'),\n      \"postTitle\": this.state.title,\n      \"postDescription\": this.state.post,\n      \"fandomId\": this.state.fandomId\n    }).then(response => {\n      if (response.data.status === 200) {\n        console.log(\"reached here\");\n        this.props.history.push(\"/Home?fandomId=\" + this.state.fandomId);\n      } else {\n        this.setState({\n          error: response.data.msg\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n    event.preventDefault();\n  }\n\n  componentDidMount() {\n    axios.get(\"\".concat(API_HOST_URL, \"/getMyFandoms/\") + localStorage.getItem('id')).then(response => {\n      this.setState({\n        myFandoms: response.data\n      });\n      let found = false;\n\n      for (let i = 0; i < this.state.myFandoms.length; i++) {\n        if (this.state.myFandoms[i]['value'] === Number(this.state.fandomId)) {\n          this.setState({\n            fandomName: this.state.myFandoms[i]['name']\n          });\n          found = true;\n        }\n      }\n\n      if (found === false) {\n        this.props.history.push(\"/Home\");\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const fandomName = this.state.fandomName;\n    const error = this.state.error;\n    return React.createElement(\"div\", {\n      id: \"create-post\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(NavigationBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container_rest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"containers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"all_info text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Create Post\"), React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, fandomName), React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"Title\"), React.createElement(\"textarea\", {\n      id: \"title\",\n      name: \"text\",\n      onChange: this.handleChange,\n      maxLength: \"250\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"Text\"), React.createElement(\"textarea\", {\n      id: \"post\",\n      name: \"text\",\n      maxLength: \"5000\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: \"btn btn-primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Create\")), React.createElement(\"span\", {\n      id: \"Error\",\n      style: errorStyle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, error)))));\n  }\n\n}\n\nexport default CreatePost;","map":{"version":3,"sources":["C:/Users/munee/Desktop/project-stact/Fanlinc/Front-end/src/Components/CreatePost.js"],"names":["React","Component","NavigationBar","Button","Form","axios","dotenv","FandomPageBar","API_HOST_URL","process","env","REACT_APP_STACT_WEBSITE","config","errorStyle","color","CreatePost","constructor","props","urlParams","URLSearchParams","window","location","search","myParam","get","state","myFandoms","title","post","fandomId","fandomName","error","localStorage","getItem","history","push","handleChange","bind","handleSubmit","event","setState","target","id","value","console","log","put","then","response","data","status","msg","catch","preventDefault","componentDidMount","found","i","length","Number","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport NavigationBar from './NavigationBar'\r\nimport { Button, Form } from 'reactstrap';\r\nimport axios from 'axios';\r\nimport '../CSS-FOLDER/post.css'\r\nimport dotenv from 'dotenv';\r\nimport FandomPageBar from './FandomPageBar';\r\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\r\n\r\n\r\ndotenv.config();\r\n\r\nconst errorStyle = {\r\n  color: \"red\"\r\n}\r\n\r\n\r\nclass CreatePost extends Component {\r\n\r\n  constructor(props) {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n    super(props);\r\n    this.state = {\r\n      myFandoms: [],\r\n      title: '',\r\n      post: '',\r\n      fandomId: myParam,\r\n      fandomName: '',\r\n      error: \"\"\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n    if (localStorage.getItem('loggedin') !== 'true') {\r\n      this.props.history.push(\"/\")\r\n    }\r\n\r\n    if (myParam === null) {\r\n      this.props.history.push(\"/Home\");\r\n    }\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n  }\r\n\r\n\r\n  handleChange(event) {\r\n    this.setState({ [event.target.id]: event.target.value });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    console.log(this.state.title);\r\n    console.log(this.state.post);\r\n\r\n\r\n    axios.put(`${API_HOST_URL}/MakePost`,\r\n      {\r\n        \"userId\": localStorage.getItem('id'),\r\n        \"postTitle\": this.state.title,\r\n        \"postDescription\": this.state.post,\r\n        \"fandomId\": this.state.fandomId\r\n      })\r\n      .then((response) => {\r\n        if (response.data.status === 200) {\r\n          console.log(\"reached here\")\r\n          this.props.history.push(\"/Home?fandomId=\" + this.state.fandomId);\r\n        } else {\r\n          this.setState({ error: response.data.msg })\r\n        }\r\n\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  componentDidMount() {\r\n    axios.get(`${API_HOST_URL}/getMyFandoms/` + localStorage.getItem('id'))\r\n      .then((response) => {\r\n        this.setState({ myFandoms: response.data })\r\n        let found = false\r\n        for (let i = 0; i < this.state.myFandoms.length; i++) {\r\n          if (this.state.myFandoms[i]['value'] === Number(this.state.fandomId)) {\r\n            this.setState({ fandomName: this.state.myFandoms[i]['name'] });\r\n            found = true;\r\n          }\r\n        }\r\n        if (found === false) {\r\n          this.props.history.push(\"/Home\");\r\n        }\r\n\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const fandomName = this.state.fandomName;\r\n    const error = this.state.error;\r\n\r\n\r\n\r\n    return (\r\n      <div id=\"create-post\">\r\n\r\n        <NavigationBar />\r\n        <div className=\"container_rest\">\r\n          <div className=\"containers\">\r\n            <div className=\"all_info text-center\">\r\n              <h3>Create Post</h3>\r\n              <h6>{fandomName}</h6>\r\n\r\n              <Form onSubmit={this.handleSubmit}>\r\n\r\n                <h4>Title</h4>\r\n                <textarea id=\"title\" name=\"text\" onChange={this.handleChange} maxLength=\"250\"></textarea>\r\n\r\n                <h4>Text</h4>\r\n                <textarea id=\"post\" name=\"text\" maxLength=\"5000\" onChange={this.handleChange}></textarea> <br />\r\n\r\n                <Button className=\"btn btn-primary\" type=\"submit\" >Create</Button>\r\n              </Form>\r\n\r\n              <span id=\"Error\" style={errorStyle}>{error}</span>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default CreatePost;"]},"metadata":{},"sourceType":"module"}