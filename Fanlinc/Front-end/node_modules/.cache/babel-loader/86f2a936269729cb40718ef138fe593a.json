{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\munee\\\\Desktop\\\\project-stact\\\\Fanlinc\\\\Front-end\\\\src\\\\Components\\\\Auction.js\";\nimport React, { Component } from 'react';\nimport NavigationBar from './NavigationBar';\nimport { Nav, NavItem, NavLink, Button, Form } from 'reactstrap';\nimport axios from 'axios';\nimport { NavLink as RRNavLink } from 'react-router-dom';\nimport shortid from 'shortid';\nimport dotenv from 'dotenv';\nimport '../CSS-FOLDER/SearchBar.css';\nimport '../CSS-FOLDER/auction.css';\ndotenv.config();\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\nconst error = {\n  color: \"red\"\n};\n\nclass Auction extends Component {\n  constructor(props) {\n    const _urlParams = new URLSearchParams(window.location.search);\n\n    const _myParam = _urlParams.get('fandomId');\n\n    super(props);\n\n    this.uploadImage = e => {\n      const files = e.target.files;\n      const data = new FormData();\n      data.append('file', files[0]);\n      data.append('upload_preset', 'nri7mjuk');\n      axios.post('https://api.cloudinary.com/v1_1/dzuvioe6w/image/upload', data).then(response => {\n        this.setState({\n          item_image: response.data.secure_url\n        });\n      });\n    };\n\n    this.viewAuction = event => {\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('fandomId');\n      this.props.history.push(\"/Auction/item?fandomId=\" + myParam + \"&auctionId=\" + event.target.id);\n    };\n\n    this.viewProfile = event => {\n      this.props.history.push(\"/Profile?user=\" + event.target.id);\n    };\n\n    this.state = {\n      myFandoms: [],\n      fandomId: _myParam,\n      fandomInfo: [],\n      auctionInfo: [],\n      title: '',\n      min_price: null,\n      quick_sale: null,\n      item_image: '',\n      auctionMsg: null,\n      vendor: false,\n      searchQuery: ''\n    };\n\n    if (localStorage.getItem('loggedin') !== 'true') {\n      this.props.history.push(\"/\");\n    }\n\n    this.refreshId = this.refreshId.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSearch = this.handleSearch.bind(this);\n  }\n\n  refreshId(event) {\n    this.props.history.push(\"/Auction?fandomId=\" + event.target.id);\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n    this.setState({\n      fandomId: myParam\n    }); // this.getFandomInfo();\n    // this.getAuctionInfo();\n  }\n\n  getMyFandoms() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n    axios.get(\"\".concat(API_HOST_URL, \"/getMyFandoms/\") + localStorage.getItem('id')).then(response => {\n      this.setState({\n        myFandoms: response.data\n      });\n      let found = false;\n\n      for (let i = 0; i < this.state.myFandoms.length; i++) {\n        if (this.state.myFandoms[i]['value'] === Number(myParam)) {\n          found = true;\n        }\n      }\n\n      if (found === false) {\n        this.props.history.push(\"/Auction\");\n\n        if (this.state.fandomId !== null) {\n          window.location.reload();\n        }\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  getProfile() {\n    const userId = localStorage.getItem('id');\n    axios.get(\"\".concat(API_HOST_URL, \"/getProfile/\") + userId).then(response => {\n      this.setState({\n        vendor: response.data.vendor\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    this.getMyFandoms();\n    this.getProfile();\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n\n    if (myParam !== null) {\n      // this.getFandomInfo();\n      this.getAuctions();\n    }\n  }\n\n  componentDidUpdate(newProps) {\n    if (this.props.location !== newProps.location) {\n      const urlParams = new URLSearchParams(window.location.search);\n      const myParam = urlParams.get('fandomId');\n      console.log(myParam);\n\n      if (myParam === null) {\n        // this.setState({ fandomInfo: [] });\n        this.setState({\n          auctionInfo: []\n        });\n      } else {\n        this.getAuctions();\n      }\n    }\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const urlParams = new URLSearchParams(window.location.search);\n    var regex = /^\\d+(?:\\.\\d{0,2})$/;\n    const userId = localStorage.getItem('id');\n    const fandomId = urlParams.get('fandomId');\n    const title = this.state.title;\n    const min_price = this.state.min_price;\n    const quick_sale = this.state.quick_sale;\n    const item_image = this.state.item_image;\n    console.log(\"userId \" + userId);\n    console.log(\"fandomId \" + fandomId);\n    console.log(\"Title \" + title);\n    console.log(\"min price \" + min_price);\n    console.log(\"Quick sale \" + quick_sale);\n    console.log(\"item image \" + item_image);\n\n    if (fandomId === null) {\n      this.setState({\n        auctionMsg: \"You are not in a fandom\"\n      });\n      return;\n    }\n\n    if (min_price === null || quick_sale === null || title === '' || item_image === '') {\n      this.setState({\n        auctionMsg: \"Please fill out every field\"\n      });\n      return;\n    }\n\n    if (!regex.test(min_price) || !regex.test(quick_sale)) {\n      this.setState({\n        auctionMsg: \"Dollar format please i.e. 1.00\"\n      });\n      return;\n    }\n\n    console.log(parseFloat(min_price) > parseFloat(quick_sale));\n\n    if (parseFloat(min_price) > parseFloat(quick_sale)) {\n      this.setState({\n        auctionMsg: \"Min price should not be bigger than your instant sale price\"\n      });\n      return;\n    }\n\n    axios.put(\"\".concat(API_HOST_URL, \"/createAuction\"), {\n      \"userId\": userId,\n      \"fandomId\": fandomId,\n      \"title\": title,\n      \"min_price\": min_price,\n      \"quick_sale\": quick_sale,\n      \"item_image\": item_image\n    }).then(response => {\n      if (response.data.status === 200) {\n        this.setState({\n          auctionMsg: ''\n        }); //this.clearData();\n        //this.getComments();\n\n        this.getAuctions();\n        this.setState({\n          title: ''\n        });\n        this.setState({\n          min_price: ''\n        });\n        this.setState({\n          quick_sale: null\n        });\n        this.setState({\n          item_price: null\n        });\n        this.setState({\n          item_image: ''\n        });\n      } else {\n        this.setState({\n          auctionMsg: response.data.msg\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  getAuctions() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n    axios.get(\"\".concat(API_HOST_URL, \"/getAuction/\") + myParam).then(response => {\n      this.setState({\n        auctionInfo: response.data\n      });\n      console.log(this.state.auctionInfo);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  handleSearch(event) {\n    event.preventDefault();\n    console.log(this.state.searchQuery);\n\n    if (this.state.searchQuery === '') {\n      this.getAuctions();\n      return;\n    }\n\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('fandomId');\n    axios.get(\"\".concat(API_HOST_URL, \"/getAuction/\") + myParam + \"/\" + this.state.searchQuery).then(response => {\n      this.setState({\n        auctionInfo: response.data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const vendor = this.state.vendor;\n    const MyFandoms = this.state.myFandoms.map(o => React.createElement(\"div\", {\n      key: shortid.generate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(NavItem, {\n      key: o.name,\n      id: \"navi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      href: \"#\",\n      onClick: this.refreshId,\n      id: o.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, o.name))));\n    const auctions = this.state.auctionInfo.map(o => React.createElement(\"tr\", {\n      key: shortid.generate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, o.title), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, \"$\", o.min_price), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, \"$\", o.quick_sale), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    }, \"$\", o.curr_bid), React.createElement(\"td\", {\n      id: o.curr_bidder,\n      onClick: this.viewProfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318\n      },\n      __self: this\n    }, o.curr_name), React.createElement(\"td\", {\n      id: \"buttonrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(Button, {\n      id: o.auctionId,\n      onClick: this.viewAuction,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Bid\"))));\n    const auctionMsg = this.state.auctionMsg;\n    return React.createElement(\"div\", {\n      id: \"auction\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }, React.createElement(NavigationBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container_rest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"containers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"all_info text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }, \"Auction Page\"), React.createElement(Nav, {\n      id: \"navi\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, MyFandoms), React.createElement(\"div\", {\n      className: \"searchdiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSearch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"searchQuery\",\n      onChange: this.handleChange,\n      value: this.state.searchQuery,\n      placeholder: \"Search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-search\",\n      id: \"search-pads\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    })))), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }), React.createElement(\"table\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      className: \"items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358\n      },\n      __self: this\n    }, \"Items\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, \"Min Bid\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, \"QuickSale\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, \"Current Bid\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }, \"Current Highest Bidder\")), auctions)), vendor ? React.createElement(Form, {\n      className: \"makeauction text-center\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, \" Make an Auction\"), React.createElement(\"div\", {\n      className: \"col-25\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, \"Item:\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      maxLength: \"150\",\n      name: \"title\",\n      placeholder: \"Item title..\",\n      value: this.state.title,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, \"Minimum Bid:\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"min_price\",\n      value: this.state.min_price || '',\n      onChange: this.handleChange,\n      placeholder: \"minimum bid..\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, \"QuickSale\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"quick_sale\",\n      value: this.state.quick_sale || '',\n      onChange: this.handleChange,\n      placeholder: \"instant sale price..\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"fname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, \"Item Image\")), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.uploadImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, \"Submit\")), React.createElement(\"span\", {\n      style: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410\n      },\n      __self: this\n    }, auctionMsg)) : null))));\n  }\n\n}\n\nexport default Auction;","map":{"version":3,"sources":["C:/Users/munee/Desktop/project-stact/Fanlinc/Front-end/src/Components/Auction.js"],"names":["React","Component","NavigationBar","Nav","NavItem","NavLink","Button","Form","axios","RRNavLink","shortid","dotenv","config","API_HOST_URL","process","env","REACT_APP_STACT_WEBSITE","error","color","Auction","constructor","props","urlParams","URLSearchParams","window","location","search","myParam","get","uploadImage","e","files","target","data","FormData","append","post","then","response","setState","item_image","secure_url","viewAuction","event","history","push","id","viewProfile","state","myFandoms","fandomId","fandomInfo","auctionInfo","title","min_price","quick_sale","auctionMsg","vendor","searchQuery","localStorage","getItem","refreshId","bind","handleSubmit","handleChange","handleSearch","getMyFandoms","found","i","length","Number","reload","catch","console","log","getProfile","userId","componentDidMount","getAuctions","componentDidUpdate","newProps","name","value","preventDefault","regex","test","parseFloat","put","status","item_price","msg","render","MyFandoms","map","o","generate","auctions","curr_bid","curr_bidder","curr_name","auctionId"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport NavigationBar from './NavigationBar'\r\nimport { Nav, NavItem, NavLink, Button, Form } from 'reactstrap';\r\nimport axios from 'axios';\r\nimport { NavLink as RRNavLink } from 'react-router-dom';\r\nimport shortid from 'shortid';\r\nimport dotenv from 'dotenv';\r\nimport '../CSS-FOLDER/SearchBar.css'\r\nimport '../CSS-FOLDER/auction.css'\r\ndotenv.config();\r\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE\r\n\r\nconst error = {\r\n  color: \"red\"\r\n}\r\n\r\nclass Auction extends Component {\r\n\r\n  constructor(props) {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n    super(props);\r\n    this.state = {\r\n      myFandoms: [],\r\n      fandomId: myParam,\r\n      fandomInfo: [],\r\n      auctionInfo: [],\r\n      title: '',\r\n      min_price: null,\r\n      quick_sale: null,\r\n      item_image: '',\r\n      auctionMsg: null,\r\n      vendor: false,\r\n      searchQuery: ''\r\n\r\n\r\n\r\n    };\r\n    if (localStorage.getItem('loggedin') !== 'true') {\r\n      this.props.history.push(\"/\")\r\n    }\r\n\r\n    this.refreshId = this.refreshId.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSearch = this.handleSearch.bind(this);\r\n  }\r\n\r\n\r\n  refreshId(event) {\r\n    this.props.history.push(\"/Auction?fandomId=\" + event.target.id)\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n    this.setState({ fandomId: myParam });\r\n    // this.getFandomInfo();\r\n    // this.getAuctionInfo();\r\n  }\r\n\r\n  getMyFandoms() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n\r\n    axios.get(`${API_HOST_URL}/getMyFandoms/` + localStorage.getItem('id'))\r\n      .then((response) => {\r\n        this.setState({ myFandoms: response.data });\r\n        let found = false\r\n        for (let i = 0; i < this.state.myFandoms.length; i++) {\r\n          if (this.state.myFandoms[i]['value'] === Number(myParam)) {\r\n            found = true;\r\n          }\r\n        }\r\n        if (found === false) {\r\n          this.props.history.push(\"/Auction\");\r\n          if (this.state.fandomId !== null) {\r\n            window.location.reload();\r\n          }\r\n        }\r\n\r\n\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n  }\r\n\r\n  getProfile() {\r\n    const userId = localStorage.getItem('id');\r\n    axios.get(`${API_HOST_URL}/getProfile/` + userId)\r\n      .then((response) => {\r\n        this.setState({ vendor: response.data.vendor });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getMyFandoms();\r\n    this.getProfile();\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n    if (myParam !== null) {\r\n      // this.getFandomInfo();\r\n      this.getAuctions();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(newProps) {\r\n    if (this.props.location !== newProps.location) {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      const myParam = urlParams.get('fandomId')\r\n      console.log(myParam);\r\n      if (myParam === null) {\r\n        // this.setState({ fandomInfo: [] });\r\n        this.setState({ auctionInfo: [] });\r\n      } else {\r\n        this.getAuctions();\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  }\r\n\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n\r\n\r\n\r\n    var regex = /^\\d+(?:\\.\\d{0,2})$/;\r\n    const userId = localStorage.getItem('id');\r\n    const fandomId = urlParams.get('fandomId');\r\n    const title = this.state.title;\r\n    const min_price = this.state.min_price;\r\n    const quick_sale = this.state.quick_sale;\r\n    const item_image = this.state.item_image\r\n    console.log(\"userId \" + userId);\r\n    console.log(\"fandomId \" + fandomId);\r\n    console.log(\"Title \" + title);\r\n    console.log(\"min price \" + min_price);\r\n    console.log(\"Quick sale \" + quick_sale);\r\n    console.log(\"item image \" + item_image);\r\n\r\n\r\n    if (fandomId === null) {\r\n      this.setState({ auctionMsg: \"You are not in a fandom\" });\r\n      return;\r\n    }\r\n\r\n\r\n\r\n\r\n    if (min_price === null || quick_sale === null || title === '' || item_image === '') {\r\n      this.setState({ auctionMsg: \"Please fill out every field\" });\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    if (!regex.test(min_price) || !(regex.test(quick_sale))) {\r\n      this.setState({ auctionMsg: \"Dollar format please i.e. 1.00\" });\r\n      return;\r\n    }\r\n\r\n    console.log(parseFloat(min_price) > parseFloat(quick_sale));\r\n    if (parseFloat(min_price) > parseFloat(quick_sale)) {\r\n      this.setState({ auctionMsg: \"Min price should not be bigger than your instant sale price\" });\r\n      return;\r\n    }\r\n\r\n\r\n\r\n    axios.put(`${API_HOST_URL}/createAuction`, {\r\n      \"userId\": userId,\r\n      \"fandomId\": fandomId,\r\n      \"title\": title,\r\n      \"min_price\": min_price,\r\n      \"quick_sale\": quick_sale,\r\n      \"item_image\": item_image\r\n    })\r\n      .then((response) => {\r\n        if (response.data.status === 200) {\r\n          this.setState({ auctionMsg: '' });\r\n          //this.clearData();\r\n          //this.getComments();\r\n          this.getAuctions();\r\n          this.setState({ title: ''  });\r\n          this.setState({ min_price: ''  });\r\n          this.setState({ quick_sale: null  });\r\n          this.setState({ item_price: null  });\r\n          this.setState({ item_image : ''});\r\n          \r\n\r\n        } else {\r\n          this.setState({ auctionMsg: response.data.msg });\r\n        \r\n\r\n        }\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n  }\r\n\r\n  getAuctions() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n\r\n    axios.get(`${API_HOST_URL}/getAuction/` + myParam)\r\n      .then((response) => {\r\n        this.setState({ auctionInfo: response.data });\r\n        console.log(this.state.auctionInfo);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  uploadImage = e => {\r\n    const files = e.target.files\r\n    const data = new FormData()\r\n    data.append('file', files[0])\r\n    data.append('upload_preset', 'nri7mjuk')\r\n    axios.post(\r\n      'https://api.cloudinary.com/v1_1/dzuvioe6w/image/upload', data\r\n    )\r\n      .then((response) => {\r\n        this.setState({ item_image: response.data.secure_url });\r\n      });\r\n\r\n\r\n  }\r\n\r\n\r\n  viewAuction = (event) => {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n\r\n    this.props.history.push(\"/Auction/item?fandomId=\" + myParam + \"&auctionId=\" + event.target.id);\r\n  }\r\n\r\n\r\n  viewProfile = (event) => {\r\n    this.props.history.push(\"/Profile?user=\" + event.target.id);\r\n\r\n  }\r\n\r\n\r\n  handleSearch(event) {\r\n    event.preventDefault();\r\n    console.log(this.state.searchQuery);\r\n    if (this.state.searchQuery === '') {\r\n      this.getAuctions();\r\n      return;\r\n    }\r\n\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam = urlParams.get('fandomId')\r\n\r\n    axios.get(`${API_HOST_URL}/getAuction/` + myParam + \"/\" + this.state.searchQuery)\r\n      .then((response) => {\r\n        this.setState({ auctionInfo: response.data });\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const vendor = this.state.vendor;\r\n\r\n    const MyFandoms = this.state.myFandoms.map(o =>\r\n      <div key={shortid.generate()}>\r\n        <NavItem key={o.name} id=\"navi\">\r\n          <NavLink href=\"#\" onClick={this.refreshId} id={o.value} >{o.name}</NavLink>\r\n        </NavItem>\r\n\r\n\r\n\r\n      </div>\r\n    );\r\n\r\n    const auctions = this.state.auctionInfo.map(o =>\r\n\r\n      <tr key={shortid.generate()}>\r\n        <td>{o.title}</td>\r\n        <td>${o.min_price}</td>\r\n        <td>${o.quick_sale}</td>\r\n        <td>${o.curr_bid}</td>\r\n        <td id={o.curr_bidder} onClick={this.viewProfile}>{o.curr_name}</td>\r\n        <td id=\"buttonrow\">\r\n          <Button id={o.auctionId} onClick={this.viewAuction}>Bid</Button>\r\n        </td>\r\n      </tr>\r\n\r\n\r\n\r\n    );\r\n    const auctionMsg = this.state.auctionMsg;\r\n    return (\r\n      <div id=\"auction\">\r\n        <NavigationBar />\r\n        <div className=\"container_rest\">\r\n          <div className=\"containers\">\r\n            <div className=\"all_info text-center\">\r\n\r\n              <h3>Auction Page</h3>\r\n\r\n\r\n\r\n              <Nav id=\"navi\">\r\n                {MyFandoms}\r\n              </Nav>\r\n\r\n\r\n              <div className=\"searchdiv\">\r\n                <Form onSubmit={this.handleSearch}>\r\n                  <input type=\"text\" name=\"searchQuery\" onChange={this.handleChange} value={this.state.searchQuery} placeholder=\"Search\" ></input>\r\n                  <button type=\"submit\"><i className=\"fa fa-search\" id=\"search-pads\"></i></button>\r\n\r\n                </Form>\r\n              </div>\r\n\r\n              <hr />\r\n\r\n\r\n              <table className=\"text-center\">\r\n                <thead className=\"text-center\">\r\n                  <tr className=\"text-center\">\r\n                    <th className=\"items\"><a>Items</a></th>\r\n                    <th>Min Bid</th>\r\n                    <th>QuickSale</th>\r\n                    <th>Current Bid</th>\r\n                    <th>Current Highest Bidder</th>\r\n\r\n                  </tr>\r\n\r\n\r\n                  {auctions}\r\n                </thead>\r\n\r\n              </table>\r\n\r\n\r\n              {vendor ?\r\n\r\n                <Form className=\"makeauction text-center\" onSubmit={this.handleSubmit}>\r\n                  <h1> Make an Auction</h1>\r\n                  <div className=\"col-25\">\r\n                    <label htmlFor=\"fname\">Item:</label>\r\n                  </div>\r\n                  <div>\r\n                    <input type=\"text\" maxLength=\"150\" name=\"title\" placeholder=\"Item title..\" value={this.state.title} onChange={this.handleChange} />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"fname\">Minimum Bid:</label>\r\n                  </div>\r\n                  <div>\r\n                    <input type=\"text\" name=\"min_price\" value={this.state.min_price || ''} onChange={this.handleChange} placeholder=\"minimum bid..\" />\r\n                  </div>\r\n                  <div>\r\n                    <label htmlFor=\"fname\">QuickSale</label>\r\n                  </div>\r\n                  <div>\r\n                    <input type=\"text\" name=\"quick_sale\" value={this.state.quick_sale || ''} onChange={this.handleChange} placeholder=\"instant sale price..\" />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label htmlFor=\"fname\">Item Image</label>\r\n                  </div>\r\n\r\n                  <input\r\n                    type=\"file\"\r\n                    onChange={this.uploadImage}\r\n                  />\r\n\r\n\r\n                  <div className=\"submit\">\r\n                    <Button type=\"submit\">Submit</Button>\r\n                  </div>\r\n\r\n                  <span style={error}>{auctionMsg}</span>\r\n\r\n                </Form>\r\n\r\n                : null}\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n      </div>\r\n\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default Auction;\r\n"]},"metadata":{},"sourceType":"module"}