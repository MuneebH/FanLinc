{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\munee\\\\Desktop\\\\project-stact\\\\Fanlinc\\\\Front-end\\\\src\\\\Components\\\\item.js\";\nimport React, { Component } from 'react';\nimport NavigationBar from './NavigationBar';\nimport { Button, Form } from 'reactstrap';\nimport axios from 'axios';\nimport '../CSS-FOLDER/auction.css';\nimport dotenv from 'dotenv';\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\ndotenv.config();\nconst hcent = {\n  textAlign: \"center\",\n  display: \"inline-block\"\n};\nconst error = {\n  color: \"red\"\n};\n\nclass item extends Component {\n  constructor(props) {\n    const _urlParams = new URLSearchParams(window.location.search);\n\n    const myParam1 = _urlParams.get('fandomId');\n\n    const myParam2 = _urlParams.get('auctionId');\n\n    super(props);\n\n    this.makeBid = event => {\n      event.preventDefault();\n\n      if (parseFloat(this.state.quick_sale) === parseFloat(this.state.currHighest)) {\n        this.setState({\n          errorMsg: \"Already sold\"\n        });\n        return;\n      }\n\n      const urlParams = new URLSearchParams(window.location.search);\n      const fandomId = urlParams.get('fandomId');\n      const auctionId = urlParams.get('auctionId');\n      var regex = /^\\d+(?:\\.\\d{0,2})$/;\n      const bid = this.state.bid;\n      const userId = localStorage.getItem('id');\n\n      if (!regex.test(bid)) {\n        this.setState({\n          errorMsg: \"Dollar format please i.e. 1.00\"\n        });\n        return;\n      }\n\n      if (parseFloat(bid) < parseFloat(this.state.min_price)) {\n        this.setState({\n          errorMsg: \"Atleast minimum\"\n        });\n        return;\n      }\n\n      if (parseFloat(this.state.quick_sale) < parseFloat(bid)) {\n        this.setState({\n          errorMsg: \"Must be less than or equal to the quick sale\"\n        });\n        return;\n      }\n\n      if (this.state.currHighest !== '') {\n        if (parseFloat(bid) <= parseFloat(this.state.currHighest)) {\n          this.setState({\n            errorMsg: \"The highest bid is bigger than or equal to yours\"\n          });\n          return;\n        }\n      }\n\n      axios.post(\"\".concat(API_HOST_URL, \"/makeBid\"), {\n        \"auctionId\": auctionId,\n        \"fandomId\": fandomId,\n        \"userId\": userId,\n        \"bid\": bid\n      }).then(response => {\n        if (response.data.status === 200) {\n          this.setState({\n            errorMsg: \"\"\n          });\n          this.getAuctions();\n        } else {\n          this.setState({\n            auctionMsg: response.data.msg\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.viewProfile = event => {\n      this.props.history.push(\"/Profile?user=\" + event.target.id);\n    };\n\n    this.state = {\n      auctionInfo: [],\n      currHighest: '',\n      min_price: 0,\n      bid: null,\n      errorMsg: '',\n      quick_sale: 0\n    };\n\n    if (myParam1 === null || myParam2 === null) {\n      this.props.history.push(\"/Auction\");\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  getAuctions() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam1 = urlParams.get('fandomId');\n    const myParam2 = urlParams.get('auctionId');\n    axios.get(\"\".concat(API_HOST_URL, \"/getAuction/\") + myParam1 + \"/\" + myParam2).then(response => {\n      this.setState({\n        auctionInfo: response.data\n      });\n      this.setState({\n        currHighest: response.data[0]['curr_bid']\n      });\n      this.setState({\n        min_price: response.data[0]['min_price']\n      });\n      this.setState({\n        quick_sale: response.data[0]['quick_sale']\n      });\n      console.log(this.state.auctionInfo);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    this.getAuctions();\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    const errorMsg = this.state.errorMsg;\n    const viewAuction = this.state.auctionInfo.map(o => React.createElement(\"div\", {\n      style: hcent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: hcent,\n      id: o.userId,\n      onClick: this.viewProfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \" Auction Created by \", o.auctioner), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: o.item_image,\n      style: hcent,\n      alt: \"Avatar\",\n      width: \"75%\",\n      height: \"75%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      style: hcent,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, o.title), React.createElement(\"div\", {\n      id: \"descriptionbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, o.curr_bid ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Current Highest Bid: $\", o.curr_bid) : null, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Quick sale: $\", o.quick_sale), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Min Bid: $\", o.min_price)), React.createElement(\"div\", {\n      id: \"bidbox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      name: \"bid\",\n      placeholder: \"Make a bid?\",\n      value: this.state.bid || '',\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"button\",\n      type: \"button\",\n      onClick: this.makeBid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Make Bid\"))));\n    return React.createElement(\"div\", {\n      id: \"auction-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(NavigationBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container_rest\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"containers\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"all_info text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, viewAuction, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: error,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, errorMsg)))));\n  }\n\n}\n\nexport default item;","map":{"version":3,"sources":["C:/Users/munee/Desktop/project-stact/Fanlinc/Front-end/src/Components/item.js"],"names":["React","Component","NavigationBar","Button","Form","axios","dotenv","API_HOST_URL","process","env","REACT_APP_STACT_WEBSITE","config","hcent","textAlign","display","error","color","item","constructor","props","urlParams","URLSearchParams","window","location","search","myParam1","get","myParam2","makeBid","event","preventDefault","parseFloat","state","quick_sale","currHighest","setState","errorMsg","fandomId","auctionId","regex","bid","userId","localStorage","getItem","test","min_price","post","then","response","data","status","getAuctions","auctionMsg","msg","catch","console","log","viewProfile","history","push","target","id","auctionInfo","handleChange","bind","componentDidMount","name","value","render","viewAuction","map","o","auctioner","item_image","title","curr_bid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport NavigationBar from './NavigationBar'\r\nimport { Button, Form } from 'reactstrap';\r\nimport axios from 'axios';\r\nimport '../CSS-FOLDER/auction.css'\r\nimport dotenv from 'dotenv';\r\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\r\n\r\n\r\ndotenv.config();\r\n\r\nconst hcent = {\r\n  textAlign: \"center\",\r\n  display: \"inline-block\"\r\n}\r\n\r\nconst error = {\r\n  color: \"red\"\r\n}\r\n\r\n\r\n\r\nclass item extends Component {\r\n\r\n  constructor(props) {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam1 = urlParams.get('fandomId')\r\n    const myParam2 = urlParams.get('auctionId')\r\n    super(props);\r\n    this.state = {\r\n      auctionInfo: [],\r\n      currHighest: '',\r\n      min_price: 0,\r\n      bid: null,\r\n      errorMsg: '',\r\n      quick_sale: 0\r\n    };\r\n\r\n    if (myParam1 === null || myParam2 === null) {\r\n      this.props.history.push(\"/Auction\");\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n\r\n  getAuctions() {\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const myParam1 = urlParams.get('fandomId')\r\n    const myParam2 = urlParams.get('auctionId')\r\n\r\n    axios.get(`${API_HOST_URL}/getAuction/` + myParam1 + \"/\" + myParam2)\r\n      .then((response) => {\r\n        this.setState({ auctionInfo: response.data });\r\n        this.setState({ currHighest: response.data[0]['curr_bid'] });\r\n        this.setState({ min_price: response.data[0]['min_price'] });\r\n        this.setState({ quick_sale: response.data[0]['quick_sale'] });\r\n        console.log(this.state.auctionInfo);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    this.getAuctions();\r\n  }\r\n\r\n\r\n  makeBid = (event) => {\r\n    event.preventDefault();\r\n\r\n    if (parseFloat(this.state.quick_sale) === parseFloat(this.state.currHighest)) {\r\n      this.setState({ errorMsg: \"Already sold\" });\r\n      return;\r\n    }\r\n\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    const fandomId = urlParams.get('fandomId')\r\n    const auctionId = urlParams.get('auctionId')\r\n    var regex = /^\\d+(?:\\.\\d{0,2})$/;\r\n    const bid = this.state.bid;\r\n    const userId = localStorage.getItem('id');\r\n\r\n    if (!regex.test(bid)) {\r\n      this.setState({ errorMsg: \"Dollar format please i.e. 1.00\" });\r\n      return;\r\n    }\r\n\r\n    if (parseFloat(bid) < parseFloat(this.state.min_price)) {\r\n      this.setState({ errorMsg: \"Atleast minimum\" });\r\n      return;\r\n    }\r\n\r\n    if (parseFloat(this.state.quick_sale) < parseFloat(bid)) {\r\n      this.setState({ errorMsg: \"Must be less than or equal to the quick sale\" });\r\n      return;\r\n    }\r\n\r\n    if (this.state.currHighest !== '') {\r\n      if (parseFloat(bid) <= parseFloat(this.state.currHighest)) {\r\n        this.setState({ errorMsg: \"The highest bid is bigger than or equal to yours\" });\r\n        return;\r\n      }\r\n    }\r\n\r\n\r\n    axios.post(`${API_HOST_URL}/makeBid`, {\r\n      \"auctionId\": auctionId,\r\n      \"fandomId\": fandomId,\r\n      \"userId\": userId,\r\n      \"bid\": bid\r\n    })\r\n      .then((response) => {\r\n        if (response.data.status === 200) {\r\n          this.setState({ errorMsg: \"\" });\r\n          this.getAuctions();\r\n        } else {\r\n          this.setState({ auctionMsg: response.data.msg });\r\n\r\n        }\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n\r\n\r\n  }\r\n\r\n\r\n  handleChange(event) {\r\n    this.setState({ [event.target.name]: event.target.value });\r\n  }\r\n\r\n  viewProfile = (event) => {\r\n    this.props.history.push(\"/Profile?user=\" + event.target.id);\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n\r\n    const errorMsg = this.state.errorMsg;\r\n\r\n\r\n    const viewAuction = this.state.auctionInfo.map(o =>\r\n      <div style={hcent}>\r\n        <h4 style={hcent} id={o.userId} onClick={this.viewProfile}> Auction Created by {o.auctioner}</h4> <br />\r\n        <img src={o.item_image} style={hcent} alt=\"Avatar\" width=\"75%\" height=\"75%\" /> <br />\r\n\r\n        <h3 style={hcent}>{o.title}</h3>\r\n        <div id=\"descriptionbox\">\r\n          {o.curr_bid ? <p>Current Highest Bid: ${o.curr_bid}</p>\r\n            : null}\r\n          <p>Quick sale: ${o.quick_sale}</p>\r\n\r\n          <p>Min Bid: ${o.min_price}</p>\r\n        </div>\r\n        <div id=\"bidbox\">\r\n          <input type=\"text\" name=\"bid\" placeholder=\"Make a bid?\" value={this.state.bid || ''} onChange={this.handleChange} />\r\n          <button className=\"button\" type=\"button\" onClick={this.makeBid}>Make Bid</button>\r\n        </div>\r\n\r\n\r\n\r\n      </div>\r\n\r\n    );\r\n\r\n\r\n\r\n\r\n    return (\r\n      <div id=\"auction-items\">\r\n\r\n        <NavigationBar />\r\n\r\n        <div className=\"container_rest\">\r\n          <div className=\"containers\">\r\n            <div className=\"all_info text-center\">\r\n\r\n\r\n              {viewAuction}\r\n              <br />\r\n              <span style={error}>{errorMsg}</span>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n\r\n\r\n      </div >\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default item;"]},"metadata":{},"sourceType":"module"}