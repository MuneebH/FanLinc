{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\munee\\\\Desktop\\\\project-stact\\\\Fanlinc\\\\Front-end\\\\src\\\\Components\\\\ProfileManager\\\\BioChange.js\";\nimport React, { Component } from \"react\";\nimport axios from 'axios';\nimport NavigationBar from '../NavigationBar';\nimport '../../CSS-FOLDER/biography.css';\nimport { Button } from 'reactstrap';\nimport dotenv from 'dotenv';\ndotenv.config();\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE;\nconst errorStyle = {\n  color: \"red\"\n};\nconst successStyle = {\n  color: \"green\"\n};\n\nclass BioChange extends Component {\n  constructor(props) {\n    super(props);\n\n    this.goBack = () => {\n      this.props.history.goBack();\n    };\n\n    this.state = {\n      email: localStorage.getItem('email'),\n      id: localStorage.getItem('id'),\n      loading: false,\n      newname: '',\n      success: '',\n      error: '',\n      password: '',\n      bio: ''\n    };\n\n    if (localStorage.getItem('loggedin') !== 'true') {\n      this.props.history.push(\"/Home\");\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.state.id);\n    axios.get(\"\".concat(API_HOST_URL, \"/getProfile/\") + this.state.id).then(response => {\n      this.setState({\n        bio: response.data.bio\n      });\n      this.setState({\n        loading: false\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.id]: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    axios.post(\"\".concat(API_HOST_URL, \"/profile/changeBio\"), {\n      \"email\": this.state.email,\n      \"bio\": this.state.bio\n    }).then(response => {\n      console.log(response.data);\n\n      if (response.data === 'Success') {\n        this.setState({\n          error: ''\n        });\n        this.setState({\n          success: response.data\n        });\n\n        if (response.data != null) {\n          this.setState({\n            bio: this.state.bio\n          });\n        }\n\n        this.goBack();\n      } else {\n        this.setState({\n          error: response.data\n        });\n        this.setState({\n          success: ''\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n    event.preventDefault();\n  }\n\n  render() {\n    if (!this.state.loading) {\n      const error = this.state.error;\n      const success = this.state.success;\n      const bio = this.state.bio;\n      return React.createElement(\"div\", {\n        id: \"set-bio\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(NavigationBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container_rest\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"containers\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"all_info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Bio Change\"), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, bio)), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(\"form\", {\n        className: \"text-center\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        id: \"bio\",\n        value: this.state.bio,\n        name: \"text\",\n        maxLength: \"5000\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(Button, {\n        className: \"btn btn-primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, \"Submit\"), React.createElement(Button, {\n        onClick: this.goBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"div\", {\n        id: \"success\",\n        style: successStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, success), React.createElement(\"div\", {\n        id: \"error\",\n        style: errorStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, error))))));\n    } else {\n      return \"loading\";\n    }\n  }\n\n}\n\nexport default BioChange;","map":{"version":3,"sources":["C:/Users/munee/Desktop/project-stact/Fanlinc/Front-end/src/Components/ProfileManager/BioChange.js"],"names":["React","Component","axios","NavigationBar","Button","dotenv","config","API_HOST_URL","process","env","REACT_APP_STACT_WEBSITE","errorStyle","color","successStyle","BioChange","constructor","props","goBack","history","state","email","localStorage","getItem","id","loading","newname","success","error","password","bio","push","handleChange","bind","handleSubmit","componentDidMount","console","log","get","then","response","setState","data","catch","event","target","value","post","preventDefault","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from 'axios';\r\nimport NavigationBar from '../NavigationBar'\r\nimport '../../CSS-FOLDER/biography.css'\r\nimport { Button } from 'reactstrap';\r\nimport dotenv from 'dotenv'\r\ndotenv.config();\r\nconst API_HOST_URL = process.env.REACT_APP_STACT_WEBSITE\r\n\r\n\r\nconst errorStyle = {\r\n  color: \"red\"\r\n}\r\n\r\nconst successStyle = {\r\n  color: \"green\"\r\n}\r\n\r\nclass BioChange extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: localStorage.getItem('email'),\r\n      id: localStorage.getItem('id'),\r\n      loading: false,\r\n      newname: '',\r\n      success: '',\r\n      error: '',\r\n      password: '',\r\n      bio: ''\r\n\r\n\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n    if (localStorage.getItem('loggedin') !== 'true') {\r\n      this.props.history.push(\"/Home\")\r\n    }\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    console.log(this.state.id);\r\n    axios.get(`${API_HOST_URL}/getProfile/` + this.state.id)\r\n      .then((response) => {\r\n        this.setState({ bio: response.data.bio });\r\n        this.setState({ loading: false });\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ [event.target.id]: event.target.value });\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    axios.post(`${API_HOST_URL}/profile/changeBio`, {\r\n      \"email\": this.state.email,\r\n      \"bio\": this.state.bio\r\n    })\r\n      .then((response) => {\r\n        console.log(response.data);\r\n        if (response.data === 'Success') {\r\n\r\n          this.setState({ error: '' })\r\n          this.setState({ success: response.data })\r\n          if (response.data != null) {\r\n            this.setState({ bio: this.state.bio })\r\n          }\r\n          this.goBack();\r\n\r\n\r\n        } else {\r\n          this.setState({ error: response.data })\r\n          this.setState({ success: '' })\r\n        }\r\n\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n\r\n      });\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  goBack = () => {\r\n    this.props.history.goBack();\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  render() {\r\n\r\n    if (!this.state.loading) {\r\n      const error = this.state.error;\r\n      const success = this.state.success;\r\n      const bio = this.state.bio;\r\n\r\n\r\n      return (\r\n\r\n\r\n\r\n        <div id=\"set-bio\">\r\n\r\n\r\n          < NavigationBar />\r\n          <div className=\"container_rest\">\r\n            <div className=\"containers\">\r\n              <div className=\"all_info\">\r\n                <h1 className=\"text-center\">Bio Change</h1>\r\n\r\n                <label>\r\n\r\n\r\n                  <br />\r\n                  <p>{bio}</p>\r\n\r\n                </label> <br />\r\n\r\n\r\n\r\n                <form className=\"text-center\" onSubmit={this.handleSubmit}>\r\n\r\n                  <textarea id=\"bio\" value={this.state.bio} name=\"text\" maxLength=\"5000\" onChange={this.handleChange}></textarea> <br />\r\n\r\n                  <Button className=\"btn btn-primary\" type=\"submit\" >Submit</Button>\r\n                  <Button onClick={this.goBack}>Cancel</Button>\r\n                  <div id=\"success\" style={successStyle}>{success}</div>\r\n                  <div id=\"error\" style={errorStyle}>{error}</div>\r\n\r\n\r\n\r\n                </form>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n              </div>\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n          </div>\r\n\r\n\r\n\r\n        </div >\r\n\r\n\r\n      );\r\n    } else {\r\n      return (\"loading\");\r\n    }\r\n  }\r\n}\r\n\r\nexport default BioChange;\r\n"]},"metadata":{},"sourceType":"module"}